execute if score WaveCooldown EventWaveDefense matches 1.. run scoreboard players remove WaveCooldown EventWaveDefense 1
scoreboard players set MobsAlive EventWaveDefense 0
scoreboard players set PlayersAlive EventWaveDefense 0
execute as @e[tag=Witch] at @s run execute as @a[distance=..64,tag=!Dead] run scoreboard players add PlayersAlive EventWaveDefense 1
execute as @e[tag=Death] at @s run execute as @a[distance=..5,tag=!Dead] run function elkia:event_wavedefense/playerdied
execute as @e[tag=WaveDefense] run scoreboard players add MobsAlive EventWaveDefense 1
execute if score PlayersAlive EventWaveDefense matches 0 as @e[tag=Witch] at @s run function elkia:event_wavedefense/restartwave
execute if score MobsAlive EventWaveDefense matches 1..3 run effect give @e[tag=WaveDefense] minecraft:glowing 3 1 true
execute if score MobsAlive EventWaveDefense matches 0 run execute if score WaveCooldown EventWaveDefense matches 0 run scoreboard players set WaveCooldown EventWaveDefense 200
execute if score WaveCooldown EventWaveDefense matches 60 as @e[tag=Witch] at @s run title @a[distance=..64] title ["",{"text":"3","color":"gold"}]
execute if score WaveCooldown EventWaveDefense matches 40 as @e[tag=Witch] at @s run title @a[distance=..64] title ["",{"text":"2","color":"red"}]
execute if score WaveCooldown EventWaveDefense matches 20 as @e[tag=Witch] at @s run title @a[distance=..64] title ["",{"text":"1","color":"dark_red"}]
execute if score WaveCooldown EventWaveDefense matches 200 run execute if score Wave EventWaveDefense matches 0 run execute as @e[tag=Witch] at @s run tellraw @a[distance=0..50] [{"text":"<","color":"white"},{"text":"Hecate","color":"dark_purple"},{"text":"> ","color":"white"},{"text":"Alakaz- WHO ON EARTH ARE YOU? MINIONS! Seize these trespassers!","color":"light_purple"}]
execute if score WaveCooldown EventWaveDefense matches 2 run execute if score Wave EventWaveDefense matches 0 run execute if score MobsAlive EventWaveDefense matches 0 run function elkia:event_wavedefense/spawnwave1
execute if score WaveCooldown EventWaveDefense matches 200 run execute if score Wave EventWaveDefense matches 1 run execute as @e[tag=Witch] at @s run tellraw @a[distance=0..50] [{"text":"<","color":"white"},{"text":"Hecate","color":"dark_purple"},{"text":"> ","color":"white"},{"text":"Ohhh, rookies! Great, I don't have all day.","color":"light_purple"}]
execute if score WaveCooldown EventWaveDefense matches 2 run execute if score Wave EventWaveDefense matches 1 run execute if score MobsAlive EventWaveDefense matches 0 run function elkia:event_wavedefense/spawnwave2
execute if score WaveCooldown EventWaveDefense matches 200 run execute if score Wave EventWaveDefense matches 2 run execute as @e[tag=Witch] at @s run tellraw @a[distance=0..50] [{"text":"<","color":"white"},{"text":"Hecate","color":"dark_purple"},{"text":"> ","color":"white"},{"text":"Wait, looking like a baboon wasn't intentional? That's hilarious!","color":"light_purple"}]
execute if score WaveCooldown EventWaveDefense matches 2 run execute if score Wave EventWaveDefense matches 2 run execute if score MobsAlive EventWaveDefense matches 0 run function elkia:event_wavedefense/spawnwave3
execute if score WaveCooldown EventWaveDefense matches 200 run execute if score Wave EventWaveDefense matches 3 run execute as @e[tag=Witch] at @s run tellraw @a[distance=0..50] [{"text":"<","color":"white"},{"text":"Hecate","color":"dark_purple"},{"text":"> ","color":"white"},{"text":"Look on the bright side! I heard Cao & Co. are having a Halloween sale on tombstones!","color":"light_purple"}]
execute if score WaveCooldown EventWaveDefense matches 2 run execute if score Wave EventWaveDefense matches 3 run execute if score MobsAlive EventWaveDefense matches 0 run function elkia:event_wavedefense/spawnwave4
execute if score WaveCooldown EventWaveDefense matches 200 run execute if score Wave EventWaveDefense matches 4 run execute as @e[tag=Witch] at @s run tellraw @a[distance=0..50] [{"text":"<","color":"white"},{"text":"Hecate","color":"dark_purple"},{"text":"> ","color":"white"},{"text":"I'd be careful - if you get what I mean. Ribbit. Nyeheheheh!","color":"light_purple"}]
execute if score WaveCooldown EventWaveDefense matches 2 run execute if score Wave EventWaveDefense matches 4 run execute if score MobsAlive EventWaveDefense matches 0 run function elkia:event_wavedefense/spawnwave5
execute if score WaveCooldown EventWaveDefense matches 200 run execute if score Wave EventWaveDefense matches 5 run execute as @e[tag=Witch] at @s run tellraw @a[distance=..64] [{"text":"[A]","color":"green","italic":true},{"text":"caoimhin10","color":"gold","italic":true},{"text":" whispers to you: I have gifted you some xp to repair your armour. Good Luck.","color":"dark_gray","italic":true}]
execute if score WaveCooldown EventWaveDefense matches 190..200 run execute if score Wave EventWaveDefense matches 5 run execute as @e[tag=Witch] at @s run execute as @a[distance=..64] at @s run summon minecraft:experience_orb ~ ~ ~ {Value:300}
execute if score WaveCooldown EventWaveDefense matches 2 run execute if score Wave EventWaveDefense matches 5 run execute if score MobsAlive EventWaveDefense matches 0 run function elkia:event_wavedefense/spawnwave6
execute if score WaveCooldown EventWaveDefense matches 200 run execute if score Wave EventWaveDefense matches 6 run execute as @e[tag=Witch] at @s run tellraw @a[distance=0..50] [{"text":"<","color":"white"},{"text":"Hecate","color":"dark_purple"},{"text":"> ","color":"white"},{"text":"Pffft, I bet you died to the Golden Bunny!","color":"light_purple"}]
execute if score WaveCooldown EventWaveDefense matches 2 run execute if score Wave EventWaveDefense matches 6 run execute if score MobsAlive EventWaveDefense matches 0 run function elkia:event_wavedefense/spawnwave7
execute if score WaveCooldown EventWaveDefense matches 200 run execute if score Wave EventWaveDefense matches 7 run execute as @e[tag=Witch] at @s run tellraw @a[distance=0..50] [{"text":"<","color":"white"},{"text":"Hecate","color":"dark_purple"},{"text":"> ","color":"white"},{"text":"I'm learning foreign languages, like Elvish! \"Patetiske dødelige! I er nogle svæklinge!\"","color":"light_purple"}]
execute if score WaveCooldown EventWaveDefense matches 2 run execute if score Wave EventWaveDefense matches 7 run execute if score MobsAlive EventWaveDefense matches 0 run function elkia:event_wavedefense/spawnwave8
execute if score WaveCooldown EventWaveDefense matches 200 run execute if score Wave EventWaveDefense matches 8 run execute as @e[tag=Witch] at @s run tellraw @a[distance=0..50] [{"text":"<","color":"white"},{"text":"Hecate","color":"dark_purple"},{"text":"> ","color":"white"},{"text":"I once summoned a demon. That didn't end well. For humanity.","color":"light_purple"}]
execute if score WaveCooldown EventWaveDefense matches 2 run execute if score Wave EventWaveDefense matches 8 run execute if score MobsAlive EventWaveDefense matches 0 run function elkia:event_wavedefense/spawnwave9
execute if score WaveCooldown EventWaveDefense matches 200 run execute if score Wave EventWaveDefense matches 9 run execute as @e[tag=Witch] at @s run tellraw @a[distance=0..50] [{"text":"<","color":"white"},{"text":"Hecate","color":"dark_purple"},{"text":"> ","color":"white"},{"text":"You mortals are surprisingly resilient. It's too bad you need to die now.","color":"light_purple"}]
execute if score WaveCooldown EventWaveDefense matches 2 run execute if score Wave EventWaveDefense matches 9 run execute if score MobsAlive EventWaveDefense matches 0 run function elkia:event_wavedefense/spawnwave10
execute if score WaveCooldown EventWaveDefense matches 200 run execute if score Wave EventWaveDefense matches 10 run tellraw @a[distance=0..50] [{"text":"<","color":"white"},{"text":"Hecate","color":"dark_purple"},{"text":"> ","color":"white"},{"text":"Impossible. Impossible! I'm ... I'm MELTING! I WILL BE AVENGED!!","color":"light_purple"}]
execute if score WaveCooldown EventWaveDefense matches 180 run execute if score Wave EventWaveDefense matches 10 run execute if score MobsAlive EventWaveDefense matches 0 run function elkia:event_wavedefense/victory
execute store result bossbar minecraft:events value run scoreboard players get MobsAlive EventWaveDefense
execute as @e[tag=Witch] at @s run bossbar set minecraft:events players @a[distance=..64]
execute as @e[tag=Witch] at @s run bossbar set minecraft:events visible true
execute as @e[tag=Witch] at @s run data merge entity @e[type=potion,distance=..64,limit=1,nbt={Potion:{id:"minecraft:splash_potion",Count:1b,tag:{Potion:"minecraft:poison"}}}] {Potion:{id:"minecraft:lingering_potion",Count:1b,tag:{Potion:"minecraft:water",CustomPotionColor:360978,CustomPotionEffects:[{Id:19b,Amplifier:9b,Duration:200,ShowParticles:1b}]}}}
execute as @e[tag=Witch] at @s run data merge entity @e[type=potion,distance=..64,limit=1,nbt={Potion:{id:"minecraft:splash_potion",Count:1b,tag:{Potion:"minecraft:slowness"}}}] {Potion:{id:"minecraft:lingering_potion",Count:1b,tag:{Potion:"minecraft:slowness",CustomPotionEffects:[{Id:2b,Amplifier:3b,Duration:300,ShowParticles:1b}]}}}
execute as @e[tag=Witch] at @s run data merge entity @e[type=potion,distance=..64,limit=1,nbt={Potion:{id:"minecraft:splash_potion",Count:1b,tag:{Potion:"minecraft:harming"}}}] {Potion:{id:"minecraft:splash_potion",Count:1b,tag:{Potion:"minecraft:water",CustomPotionColor:1510668,CustomPotionEffects:[{Id:7b,Amplifier:2b,Duration:1,ShowParticles:0b},{Id:15b,Amplifier:1b,Duration:60,ShowParticles:1b}]}}}
execute as @e[tag=Witch] at @s run data merge entity @e[type=potion,distance=..64,limit=1,nbt={Potion:{id:"minecraft:splash_potion",Count:1b,tag:{Potion:"minecraft:weakness"}}}] {Potion:{id:"minecraft:splash_potion",Count:1b,tag:{Potion:"minecraft:water",CustomPotionColor:6139272,CustomPotionEffects:[{Id:15b,Amplifier:1b,Duration:160,ShowParticles:1b},{Id:18b,Amplifier:1b,Duration:2400,ShowParticles:1b}]}}}